<!doctype html>
<html amp lang="vi">
<head>
<title>In sách nhỏ cỡ A7 trên giấy A4</title>
<meta name="description" content="In sách bỏ túi cỡ A7 bằng máy in phun khổ A4" />
<meta name="keywords" content="hữu ích, tài chính, cá nhân">
<link rel="canonical" href="https://lehboi.github.io/kinh-nghiem/may-tinh/in-sach-nho">
<link rel="alternate" href="https://www.lhboi.name.vn/kinh-nghiem/may-tinh/in-sach-nho">

<!-- in head of html file -->
<meta charset='utf-8'>
<script async src="https://cdn.ampproject.org/v0.js"></script>
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>

<script async custom-element="amp-social-share" src="https://cdn.ampproject.org/v0/amp-social-share-0.1.js"></script>


<script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script>
<script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
<script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>


<!-- font-size https://css-tricks.com/snippets/css/fluid-typography/ -->
<style amp-custom>
html {
  font-size: 17px;
}
@media screen and (min-width: 320px) {
  html {
    font-size: calc(17px + 7 * ((100vmin - 320px) / 680));
  }
}
@media screen and (min-width: 1000px) {
  html {
    font-size: 24px;
  }
}

amp-sidebar {
  width: 240px;
  padding-right: 2px;
  background: darkblue;
  color: blue;
  font-size: 100%;
  font-family: sans-serif;
}
.close-sidebar{width: 30px;height: 30px;position: relative;cursor: pointer;background-color: transparent;border: none;}
.close-sidebar:focus{outline: 2px auto #f06060;}
.close-sidebar span{position: absolute;left: 0;width: 30px;height: 2px;border-right: 5px;background-color: #004d00;}
.close-sidebar span:nth-child(1){transform: rotate(45deg);}
.close-sidebar span:nth-child(2){transform: rotate(-45deg);}

div.mwidth {max-width:1004px;margin: auto;}

body {background-color:dimgray;}
div.body {max-width:1004px;margin: auto; padding-left:8px; padding-right:8px; text-align:justify;color:gainsboro;background-color:black;font-family:sans-serif}
div.title {text-align:center;font-size:160%;font-weight:bold;color:#ffe033;font-family:serif}
div.right {text-align:right;}
div.lrsp {margin: 0px 5px 0px 5px;}
.todiscuss {color:lightskyblue;}
div.center {text-align:center;}
div.inlineleft { display:inline;float:left;margin:0px 5px 0px 0px; }
h1 {text-align:center;color:#ffe033;font-family:serif}
h2 {color:#adff33;font-family:serif}
h3 {color:#a3ff1a;font-family:serif}
h4 {color:#8ae600;font-family:serif}
a {color:#ffd700;}
a:visited {color:#e6c300;}
.flright { float:right; margin:0px 0px 0px 5px; width:45%; }

table.noborder {
  border-collapse: collapse;
  width: 100%;
  border: 0px;
  text-align: left;
  padding: 4px;
}

.myheader {
    background-color:darkblue; 
}

th, td {
  text-align: left;
  padding: 2px;
  vertical-align: top;
}
tr:nth-child(even){background-color: darkslategray}
table.withborder {
  width: 100%;
  border: 2px;
  border-color: #111111;
  text-align: left;
  padding: 4px;
}
.fbold { font-weight:bold; }
.tmark {background-color:navy;}

div.even {background-color: darkslategray}
.red {color:red;}
.tblue {color:deepskyblue;}
div.footer { font-size: 80%; color: red; text-align: center; }

@media (max-width: 399px) {
  .mbutton { display:inline;float:left;padding-top:7px;padding-right:10px; }

}
@media (min-width: 400px) and (max-width: 499px) {
  .mbutton { display:inline;float:left;padding-top:7px;padding-right:20px; }

}
@media (min-width: 500px) {
  .mbutton { display:inline;float:left;padding-top:7px;padding-right:40px; }

}
@media (min-width: 1260px) {
  .mbutton { display:inline;float:left;padding-top:7px;padding-right:40px; }

}

</style>
<script async custom-element="amp-auto-ads" src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js"></script>
</head>

<body>
<amp-auto-ads type="adsense" data-ad-client="ca-pub-2242556057278004"></amp-auto-ads>
  <!-- top of body -->
  <!-- sidebar menu -->
  <amp-sidebar id="sidebar" layout="nodisplay" side="left">
            <button on="tap:sidebar.close" class="close-sidebar">
                <span></span>
                <span></span>
            </button>
  <h3 class="myheader"><a href='/'>Giới-thiệu</a></h3>
    <a href='/home/about'>Thân-thế</a><br>
    <a href='/home/cv'>Thành-tích</a><br>
    <a href='/home/privacy'>Privacy Policy</a><br>
  <h3 class="myheader"><a href='/huu-ich/'>Hữu-ích</a></h3>

      <h4 class="myheader"><a href='/huu-ich/ke-hoach-tai-chinh/'>Lập-kế-hoạch-tài-chính gia-đình</a></h4>

      <h4 class="myheader"><a href='/huu-ich/dau-tu-co-phieu/'>Đầu-tư-cổ-phiếu</a></h4>

      <h4 class="myheader"><a href='/huu-ich/cac-loai-bao-hiem/'>Các loại bảo-hiểm</a></h4>

      <h4 class="myheader"><a href='/huu-ich/cau-chuyen/'>Câu-chuyện</a></h4>

  <h3 class="myheader">Kinh-nghiệm</h3>
    <h4 class="myheader"><a href='/kinh-nghiem/may-tinh/'>Máy-tính</a></h4>

    <h4 class="myheader"><a href='/kinh-nghiem/chu-viet/'>Chữ-Việt</a></h4>

    <h4 class="myheader"><a href='/kinh-nghiem/linh-tinh/'>Linh tinh</a></h4>

  <h3 class="myheader"><a href='/y-kien/'>Ý kiến</a></h3>

  <h3 class="myheader">Danh mục</h3>
    <a href='/download/'>Download</a><br>
    <a href='/sitemap'>Mục lục</a>
  <h3 class="myheader"></h3>
  <br>
  <br>
  <br>
  <br>

  </amp-sidebar>
<main>
  <div class="mwidth">
    <div class="mbutton">
      <button on="tap:sidebar.toggle" class="ampstart-btn caps ml1" style="font-size:90%;font-weight:bold;background-color: blue; color: white;">MENU
      </button>
    </div>
  </div>
  

  <div class="body">
  <div>
    <amp-social-share type="system" height="32"></amp-social-share>
    <amp-social-share type="facebook" height="32" data-param-app_id="1879212745697311"></amp-social-share>
    <amp-social-share type="whatsapp" height="32"></amp-social-share>
    <amp-social-share type="linkedin" height="32"></amp-social-share>
    <amp-social-share type="twitter" height="32"></amp-social-share>
    <amp-social-share type="tumblr" height="32"></amp-social-share>
    <amp-social-share type="line" height="32"></amp-social-share>
    <amp-social-share type="email" height="32"></amp-social-share>
  </div>

  <h1>In sách nhỏ</h1>
<div class="right">Soạn lần đầu ngày 07/07/2011</div>
<p>Các word processor như MS Word và <a href="https://www.openoffice.org/" target="_blank">OpenOffice Writer</a> có khả năng in tài liệu thành dạng booklet với bốn trang trên hai mặt giấy. Nhưng khả năng đó bị giới hạn:</p>
<ul>
<li>nếu in nhiều hơn hai trang trên một mặt giấy thì những trang đó không được sắp xếp đúng để đóng lại thành sách</li>
<li>chỉ in được theo cỡ giấy của máy in</li>
</ul>
Nếu muốn in vài bản của một cuốn sách nhỏ cỡ A7 thì không thể dùng word processor được vì:
<ul>
<li>khó tìm mua sẵn giấy cỡ A6 để cho vào máy in,</li>
<li>nếu cắt tờ A4 ra thành 4 tờ A6 để in thì sẽ gặp khó khăn khi cần photocopy ra nhiều bản</li>
</ul>
Dưới đây là các bước để in vài bản của một cuốn sách nhỏ cỡ A7 bằng các phần mềm trên <a href="https://vi.wikipedia.org/wiki/Linux" target="_blank">Linux</a>.
<ol>
<li>Dùng OpenOffice Writer soạn tài liệu trong trang A7 (74x105mm). Từ OO Writer, <b>Export as pdf</b> ra $prefix.pdf (prefix là shell variable chứa tên file)</li>
<li>Dùng <a href="https://vi.wikipedia.org/wiki/Ghostscript" target="_blank">Ghostscript</a> để đổi file pdf ra nhiều file png
<br>
<code>
gs -r$dpi -sDEVICE=pngmono  -sOutputFile=$prefix-%d.png -_ &lt; $prefix.pdf
</code>
Tuỳ theo máy in mà chọn dpi thích hợp, máy in phun thì chọn 359dpi, máy in laser thì chọn 299dpi (bớt 1 pixel để chừa lề khi in). Dùng device pngmono để in trên máy in laser, device png16m để in trên máy in phun màu.
Đến đây đã có các $prefix-i.png, i từ 1 tới num_page.</li>
<li>Nếu num_page không phải bội số của 16, dùng Gimp tạo một file trắng tên $prefix-0.png bằng cỡ các trang png, link file trắng đó thành các file nữa cho num_page đủ bội số 16</li>
<li>Dùng bash script và <a href="https://www.imagemagick.org/script/index.php" target="_blank">ImageMagick</a> để ghép 8 trang A7 thành 1 trang A4</li>
</ol>
<blockquote>
<code>
for (( i=$((j=0)); i&lt;$num_page; ((i+=16)) )) ; do
<br>{
<br>  montage $prefix-$((i + 4)).png $prefix-$((i + 1)).png $prefix-$((i + 8)).png $prefix-$((i + 5)).png $prefix-$((i + 12)).png $prefix-$((i + 9)).png $prefix-$((i + 16)).png $prefix-$((i + 13)).png -geometry +0+0 -tile 4x2 ${prefix}s-$((++j)).png;
<br>  montage $prefix-$((i + 6)).png $prefix-$((i + 7)).png $prefix-$((i + 2)).png $prefix-$((i + 3)).png $prefix-$((i + 14)).png $prefix-$((i + 15)).png $prefix-$((i + 10)).png $prefix-$((i + 11)).png -geometry +0+0 -tile 4x2 ${prefix}s-$((++j)).png;
<br>} ; done
</code>
</blockquote>
<p>In các trang ${prefix}s-i.png liên tiếp trên 2 mặt giấy A4, tốt nhất thì chọn đúng độ phân giải $dpi và chọn chế độ in tràn lề để hình không bị co hoặc mất lề. Cắt mỗi tờ A4 ra thành 4 tờ A6, xếp đôi các tờ A6 đó lại thành cuốn sách A7.</p>
<p>Do nhiều yếu tố như là cỡ giấy không chính xác tuyệt đối, cơ cấu kéo giấy vào máy nên hai mặt không khớp nhau hoàn toàn. Nhờ tốc độ in chậm nên máy in phun sẽ cho bản in hai mặt ít lệch nhau hơn máy in laser.
<br>Nếu cần đóng cuốn sách đẹp thì đưa tiệm đóng sách đóng và xén. Dùng lệnh sau để in trang bìa, đem in hoặc photocopy trên giấy dầy để làm bìa.</p>
<blockquote>
<code>montage $prefix-0.png $prefix-0.png $prefix-1.png $prefix-0.png $prefix-0.png $prefix-0.png $prefix-1.png $prefix-0.png -geometry +0+0 -tile 4x2 ${prefix}s-0.png;
</code>
</blockquote>
<p>Cách làm trên có một nhược điểm là chữ đã được render thành pixel trước khi gửi ra máy in nên <i>về lý thuyết</i> có thể không đẹp như được render bằng máy in.
<br>Theo script trên thì sách sẽ được đóng theo cách bấm đinh hoặc dán keo. Nếu muốn may sách thì phải quay các trang A7 và xếp thành từng <i>tay sách</i> với 4n tờ đôi lồng vào nhau.
<br>Tôi đã dùng cách trên để in cuốn sách Dưới Chân Thầy, file pdf ở <a href="/download/">đây</a>, một cuốn sách nhỏ chỉ cách làm người tốt mà tôi đã được đọc từ năm 1974.
<br>Trong các mailing list cũng đã có người bàn về việc này: dùng LaTex để sắp xếp các trang A7 trong trang A4.</p>



  <hr>
  <div class="footer">
  Bấm các nút sau để liên-lạc 
  <br>
  <a href="http://twitter.com/GiauCham" target="_blank"><amp-img src="/images/icons/Twitter-256.png" layout="fixed" width="40" height="40" alt="Twiter"></amp-img></a> 
  <a href="http://m.me/lamgiauchacchan" target="_blank"><amp-img src="/images/icons/Fb-Messenger-128.png" layout="fixed" width="40" height="40" alt="Facebook"></amp-img></a> 
  <a href="viber://add?number=84989760570"><amp-img src="/images/icons/Viber-128.png" layout="fixed" width="40" height="40" alt="Viber"></amp-img></a>
  <a href="http://zaloapp.com/qr/p/lzfbyqlwzn9u"><amp-img src="/images/icons/Zalo.webp" layout="fixed" width="40" height="40" alt="Zalo"></amp-img></a> 
  <a href="tel:+84989760570"><amp-img src="/images/icons/Cell-Phone-256.png" layout="fixed" width="40" height="40" alt="điện thoại"></amp-img></a>
  <a href="mailto:LEHBOI@GMAIL.COM?subject=lehboi.github.io"><amp-img src="/images/icons/address_blue-128.png" layout="fixed" width="40" height="40" alt="email"></amp-img></a> 
  <a href="https://www.google.com/maps/place/L%C3%AA+H%E1%BB%93ng+B%E1%BB%99i/@10.720385,106.7007479,15z/data=!4m5!3m4!1s0x0:0x5e907d2164963e6f!8m2!3d10.720385!4d106.7007479" target='_blank'><amp-img src="/images/icons/Home_256x256.png" layout="fixed" width="40" height="40" alt="nhà"></amp-img></a>
  </div>
  <div class="even">Trang-web này được áp-dụng <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target='_blank'>Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.
  Bạn được phép chép lại trang-web này, với điều-kiện không được thay-đổi nội-dung và không dùng cho mục-đích thu-lợi và ghi rõ nguồn-gốc <a href="https://lehboi.github.io">http://LeHBoi.github.io</a>. Điều kiện trên cũng áp dụng với domain name trước đây của website này là LHBOI.NAME.VN.
  </div>
</div>
<amp-analytics>
  <script type="application/json">
    {
      "requests": {
        "pageview": "https://c.statcounter.com/12598906/0/9a8e736a/1/"
      },
      "triggers": {
        "trackPageview": {
          "on": "visible",
          "request": "pageview"
        }
      }
    }
  </script>
</amp-analytics>
<amp-analytics type="googleanalytics">
  <script type="application/json">
  {
  "vars": { "account": "UA-25268996-1" },
  "triggers": {
  "trackPageview": {
  "on": "visible",
  "request": "pageview"
    }
   }
  }
  </script>
</amp-analytics>
</main>
</body>
</html>

