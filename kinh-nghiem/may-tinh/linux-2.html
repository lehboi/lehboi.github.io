<!doctype html>
<html amp lang="vi">
<head>
<title>Vài kinh nghiệm dùng máy Linux (2)</title>
<meta name="description" content="Trang 2: Một vài kinh nghiệm dùng máy Linux: kernel, RAID, LVM, file system" />
<meta name="keywords" content="hữu ích, tài chính, cá nhân">
<link rel="canonical" href="https://lehboi.github.io/kinh-nghiem/may-tinh/linux-2">
<link rel="alternate" href="https://www.lhboi.name.vn/kinh-nghiem/may-tinh/linux-2">

<!-- in head of html file -->
<meta charset='utf-8'>
<script async src="https://cdn.ampproject.org/v0.js"></script>
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>

<script async custom-element="amp-social-share" src="https://cdn.ampproject.org/v0/amp-social-share-0.1.js"></script>

<script async custom-element="amp-ad" src="https://cdn.ampproject.org/v0/amp-ad-0.1.js"></script>


<script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script>
<script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
<script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>


<!-- font-size https://css-tricks.com/snippets/css/fluid-typography/ -->
<style amp-custom>
html {
  font-size: 17px;
}
@media screen and (min-width: 320px) {
  html {
    font-size: calc(17px + 7 * ((100vmin - 320px) / 680));
  }
}
@media screen and (min-width: 1000px) {
  html {
    font-size: 24px;
  }
}

amp-sidebar {
  width: 240px;
  padding-right: 2px;
  background: darkblue;
  color: blue;
  font-size: 100%;
  font-family: sans-serif;
}
.close-sidebar{width: 30px;height: 30px;position: relative;cursor: pointer;background-color: transparent;border: none;}
.close-sidebar:focus{outline: 2px auto #f06060;}
.close-sidebar span{position: absolute;left: 0;width: 30px;height: 2px;border-right: 5px;background-color: #004d00;}
.close-sidebar span:nth-child(1){transform: rotate(45deg);}
.close-sidebar span:nth-child(2){transform: rotate(-45deg);}

div.mwidth {max-width:1004px;margin: auto;}

body {background-color:dimgray;}
div.body {max-width:1004px;margin: auto; padding-left:8px; padding-right:8px; text-align:justify;color:gainsboro;background-color:black;font-family:sans-serif}
div.title {text-align:center;font-size:160%;font-weight:bold;color:#ffe033;font-family:serif}
div.right {text-align:right;}
div.lrsp {margin: 0px 5px 0px 5px;}
.todiscuss {color:lightskyblue;}
div.center {text-align:center;}
div.inlineleft { display:inline;float:left;margin:0px 5px 0px 0px; }
h1 {text-align:center;color:#ffe033;font-family:serif}
h2 {color:#adff33;font-family:serif}
h3 {color:#a3ff1a;font-family:serif}
h4 {color:#8ae600;font-family:serif}
a {color:#ffd700;}
a:visited {color:#e6c300;}
.flright { float:right; margin:0px 0px 0px 5px; width:45%; }

table.noborder {
  border-collapse: collapse;
  width: 100%;
  border: 0px;
  text-align: left;
  padding: 4px;
}

.myheader {
    background-color:darkblue; 
}

th, td {
  text-align: left;
  padding: 2px;
  vertical-align: top;
}
tr:nth-child(even){background-color: darkslategray}
table.withborder {
  width: 100%;
  border: 2px;
  border-color: #111111;
  text-align: left;
  padding: 4px;
}
.fbold { font-weight:bold; }
.tmark {background-color:navy;}

div.even {background-color: darkslategray}
.red {color:red;}
.tblue {color:deepskyblue;}
div.footer { font-size: 80%; color: red; text-align: center; }

@media (max-width: 399px) {
  .mbutton { display:inline;float:left;padding-top:7px;padding-right:10px; }

  .leftads {position:absolute;top:0;left:0;height:600px;width:0px;margin:0;align:right;}
  .rightads {position:absolute;top:0;right:0;height:600px;width:0px;margin:0;}

}
@media (min-width: 400px) and (max-width: 499px) {
  .mbutton { display:inline;float:left;padding-top:7px;padding-right:20px; }

  .leftads {position:absolute;top:0;left:0;height:600px;width:0px;margin:0;align:right;}
  .rightads {position:absolute;top:0;right:0;height:600px;width:0px;margin:0;}

}
@media (min-width: 500px) {
  .mbutton { display:inline;float:left;padding-top:7px;padding-right:40px; }

  .leftads {position:absolute;top:0;left:0;height:600px;width:0px;margin:0;align:right;}
  .rightads {position:absolute;top:0;right:0;height:600px;width:0px;margin:0;}

}
@media (min-width: 1260px) {
  .mbutton { display:inline;float:left;padding-top:7px;padding-right:40px; }

  .leftads {position:absolute;top:0;left:0;height:100vh;width: calc((100% - 1020px)/2);margin:0;align:right;}
  .rightads {position:absolute;top:0;right:0;height:100vh;width: calc((100% - 1020px)/2);margin:0;}

}

</style>
</head>


<body>
  <!-- top of body -->
  <!-- sidebar menu -->
  <amp-sidebar id="sidebar" layout="nodisplay" side="left">
            <button on="tap:sidebar.close" class="close-sidebar">
                <span></span>
                <span></span>
            </button>
  <h3 class="myheader"><a href='/'>Giới-thiệu</a></h3>
    <a href='/home/about'>Thân-thế</a><br>
    <a href='/home/cv'>Thành-tích</a><br>
  <h3 class="myheader"><a href='/huu-ich/'>Hữu-ích</a></h3>

      <h4 class="myheader"><a href='/huu-ich/ke-hoach-tai-chinh/'>Lập-kế-hoạch-tài-chính gia-đình</a></h4>

      <h4 class="myheader"><a href='/huu-ich/dau-tu-co-phieu/'>Đầu-tư-cổ-phiếu</a></h4>

      <h4 class="myheader"><a href='/huu-ich/cac-loai-bao-hiem/'>Các loại bảo-hiểm</a></h4>

      <h4 class="myheader"><a href='/huu-ich/cau-chuyen/'>Câu-chuyện</a></h4>

  <h3 class="myheader">Kinh-nghiệm</h3>
    <h4 class="myheader"><a href='/kinh-nghiem/may-tinh/'>Máy-tính</a></h4>

    <h4 class="myheader"><a href='/kinh-nghiem/chu-viet/'>Chữ-Việt</a></h4>

    <h4 class="myheader"><a href='/kinh-nghiem/linh-tinh/'>Linh tinh</a></h4>

  <h3 class="myheader"><a href='/y-kien/'>Ý kiến</a></h3>

  <h3 class="myheader">Danh mục</h3>
    <a href='/download/'>Download</a><br>
    <a href='/sitemap'>Mục lục</a>
  <h3 class="myheader"></h3>
  <br>
  <br>
  <br>
  <br>

  </amp-sidebar>
<main>
  <div class="mwidth">
    <div class="mbutton">
      <button on="tap:sidebar.toggle" class="ampstart-btn caps ml1" style="font-size:90%;font-weight:bold;background-color: blue; color: white;">MENU
      </button>
    </div>
  </div>
  
  <div class="leftads">
  <!-- AMP Responsive Skyscrapper -->
<amp-ad
media="(min-width: 1260px)"
layout="fill"
type="adsense"
data-ad-client="ca-pub-2242556057278004"
data-ad-slot="5275186684">
</amp-ad>

  </div>
  <div class="rightads">
  <!-- AMP Responsive Skyscrapper -->
<amp-ad
media="(min-width: 1260px)"
layout="fill"
type="adsense"
data-ad-client="ca-pub-2242556057278004"
data-ad-slot="5275186684">
</amp-ad>

  </div>
  

  <div class="body">
  <div>
    <amp-social-share type="system" height="32"></amp-social-share>
    <amp-social-share type="facebook" height="32" data-param-app_id="1879212745697311"></amp-social-share>
    <amp-social-share type="whatsapp" height="32"></amp-social-share>
    <amp-social-share type="linkedin" height="32"></amp-social-share>
    <amp-social-share type="twitter" height="32"></amp-social-share>
    <amp-social-share type="tumblr" height="32"></amp-social-share>
    <amp-social-share type="line" height="32"></amp-social-share>
    <amp-social-share type="email" height="32"></amp-social-share>
  </div>

<h2>Cài Linux vào software RAID0</h2>
<p>Khi có từ 2 đĩa cứng trở lên trong máy, ta có thể ghép chúng lại thành RAID0 để tăng tốc độ đọc/ghi. RAID0 là một dãy các đĩa cứng được dùng cùng một lúc, khi ghi một file lớn vào RAID0 gồm n đĩa thì file sẽ được chia ra và ghi cùng lúc vào các block của các đĩa cứng, mỗi đĩa cứng chỉ chứa 1/n file do đó thời gian bus hệ thống chờ để ghi data sẽ giảm xuống. Thời gian khi đọc ra cũng nhanh hơn.</p>
<p>Nếu ta có hardware RAID controller thì không cần làm gì đặc biệt ở hệ điều hành cũng cài được hệ điều hành lên RAID. Nhưng máy ở gia đình thì ít khi có hardware RAID controller mà phải dùng software RAID. Hệ điều hành phải đứng ra tổ chức việc ghi RAID. Khi máy mới boot lên, hệ điều hành chưa chạy thì không thể điều khiển RAID được. Do đó MS Windows không thể cài vào software RAID (trừ dạng đơn giản nhất là RAID1, tức là mirrored). Linux có thể cài vào software RAID bất kỳ nhờ vào việc Linux có thể để nhân hệ điều hành trong 1 file system riêng /boot. Chỉ cần để /boot trong 1 đĩa cứng thường hoặc RAID1 là đủ để Linux boot lên và dùng toàn bộ các file system khác, kể cả /, trong software RAID bất kỳ. Kích thước của /boot rất nhỏ so với toàn bộ hệ điều hành; chỉ cần 20MB là dư dùng, mặc dù khi cài thôi Fedora Core đòi /boot phải từ 75MB trở lên.</p>
<p>Giả sử máy có 2 đĩa cứng bằng nhau hda và hdc, tạo 20MB /boot file system trên hda, tạo 250MB swap trên hda và 270MB swap trên hdc. Bây giờ, phần còn lại của hai đĩa vẫn bằng nhau. Tạo 2 RAID partition trên toàn bộ phần còn lại. Tạo một RAID0 từ 2 RAID partition đó. Tạo một physical volume trên RAID0 đó. Tạo một volume group từ physical volume. Rồi tạo các file system là các logical volume trong volume group.</p>
<!-- AMP In-article 1 -->
<amp-ad
media="(max-width: 399px)"
height=280
layout="fixed-height"
type="adsense"
data-ad-client="ca-pub-2242556057278004"
data-ad-slot="3830899615">
</amp-ad>
<amp-ad
media="(min-width: 400px) and (max-width: 499px)"
height=250
layout="fixed-height"
type="adsense"
data-ad-client="ca-pub-2242556057278004"
data-ad-slot="3830899615">
</amp-ad>
<amp-ad
media="(min-width: 500px)"
height=100
layout="fixed-height"
type="adsense"
data-ad-client="ca-pub-2242556057278004"
data-ad-slot="3830899615">
</amp-ad>

<h2>Dùng LVM thay RAID0, RAID1</h2>
<p>Một cách làm khác là tạo hai physical volume trên hai partition trên hai đĩa cứng, rồi tạo một volume group gồm hai physical volume đó, sau đó tạo các logical volume có hai stripe. Làm như vậy cũng có tác dụng như RAID0.<br />
Nhưng khi đang cài đặt Linux thì không tạo được logical volume có nhiều stripe, nên cách này không làm được với / file system. / file system chỉ ở trên 1 stripe; nhưng các file system /usr, /home, /var thì có thể ở trên nhiều stripe và tác dụng cũng khá tốt vì / file system chỉ là 1 phần nhỏ trong tất cả các file system.<br />
Muốn làm vậy thì khi cài Linux phải tạo các file system /usr, /home, /var trên các logical volume của 1 volumegroup. Sau khi cài xong, mở rộng volume group đó ra trên nhiều physical volume, rồi tạo các logical volume mới có nhiều stripe và kích thước lớn hơn hoặc bằng các file system kia, cuối cùng cp -pR tất cả các file từ các file system kia sang và sửa /etc/fstab lại để dùng các file system trên các logical mới. <br />
LVM cũng có thể làm thay RAID1 (mirror). <br />
</p>
Dùng LVM có điểm hay là dễ thay đổi hơn RAID.
<h2>Tốc độ chép file qua NFS và SMB</h2>
<p>Thử chép 703MB của 439 file giữa 2 máy: Pentium 4 2.6GHz/NIC Intel 100Mbps, và Pentium M 1,7GHz NIC Intel 1000Mbps. 2 máy nối với nhau qua switch 100Mbps.</p>
<table class="noborder">
<tbody>
<tr>
<th>Client</th>
<th>Server</th>
<th>Tốc độ (Mbps)</th>
</tr>
<tr>
<td>NFS Linux</td>
<td>NFS Linux</td>
<td>86</td>
</tr>
<tr>
<td>SMB Windows XP</td>
<td>SMB Windows XP</td>
<td>56</td>
</tr>
<tr>
<td>SMB Windows XP</td>
<td>SMB Linux</td>
<td>51</td>
</tr>
<tr>
<td>NFS Windows XP</td>
<td>NFS Linux</td>
<td>34,3</td>
</tr>
<tr>
<td>SMB Linux</td>
<td>SMB Windows XP</td>
<td>29,5</td>
</tr>
</tbody>
</table>
<div class="center">sang trang <a href="linux">1</a> - 2 - <a href="linux-3">3</a></div>

<!-- AMP In-article 1 -->
<amp-ad
media="(max-width: 399px)"
height=280
layout="fixed-height"
type="adsense"
data-ad-client="ca-pub-2242556057278004"
data-ad-slot="3830899615">
</amp-ad>
<amp-ad
media="(min-width: 400px) and (max-width: 499px)"
height=250
layout="fixed-height"
type="adsense"
data-ad-client="ca-pub-2242556057278004"
data-ad-slot="3830899615">
</amp-ad>
<amp-ad
media="(min-width: 500px)"
height=100
layout="fixed-height"
type="adsense"
data-ad-client="ca-pub-2242556057278004"
data-ad-slot="3830899615">
</amp-ad>

  <hr>
Hit count <amp-iframe width="120" height="30" frameborder="0" scrolling="no"
srcdoc="<img width='100' height='24' src='https://c.statcounter.com/12598906/0/9a8e736a/0/'>">
</amp-iframe> by <a href="https://statcounter.com" target='_blank'>statcounter.com</a>.
  <div class="footer">
  Bấm các nút sau để liên-lạc 
  <br>
  <a href="http://twitter.com/GiauCham" target="_blank"><amp-img src="/images/icons/Twitter-256.png" layout="fixed" width="40" height="40" alt="Twiter"></amp-img></a> 
  <a href="http://m.me/lamgiauchacchan" target="_blank"><amp-img src="/images/icons/Fb-Messenger-128.png" layout="fixed" width="40" height="40" alt="Facebook"></amp-img></a> 
  <a href="viber://add?number=84989760570"><amp-img src="/images/icons/Viber-128.png" layout="fixed" width="40" height="40" alt="Viber"></amp-img></a>
  <a href="http://zaloapp.com/qr/p/lzfbyqlwzn9u"><amp-img src="/images/icons/Zalo.webp" layout="fixed" width="40" height="40" alt="Zalo"></amp-img></a> 
  <a href="tel:+84989760570"><amp-img src="/images/icons/Cell-Phone-256.png" layout="fixed" width="40" height="40" alt="điện thoại"></amp-img></a>
  <a href="mailto:LEHBOI@GMAIL.COM?subject=www.lhboi.name.vn"><amp-img src="/images/icons/address_blue-128.png" layout="fixed" width="40" height="40" alt="email"></amp-img></a> 
  <a href="https://www.google.com/maps/place/L%C3%AA+H%E1%BB%93ng+B%E1%BB%99i/@10.720385,106.7007479,15z/data=!4m5!3m4!1s0x0:0x5e907d2164963e6f!8m2!3d10.720385!4d106.7007479" target='_blank'><amp-img src="/images/icons/Home_256x256.png" layout="fixed" width="40" height="40" alt="nhà"></amp-img></a>
  <br>
  Nếu bạn chép lại những trang-web này, hãy ghi nguồn-gốc <a href="https://lehboi.github.io">http://LeHBoi.github.io</a> để người-đọc có-thể tìm được nội-dung mới nhất.
  </div>
</div>
<amp-analytics type="googleanalytics">
  <script type="application/json">
  {
  "vars": { "account": "UA-25268996-1" },
  "triggers": {
  "trackPageview": {
  "on": "visible",
  "request": "pageview"
    }
   }
  }
  </script>
</amp-analytics>

</main>
</body>
</html>

